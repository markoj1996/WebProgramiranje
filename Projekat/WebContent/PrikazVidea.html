<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Prikaz Videa</title>
<link rel="stylesheet" type="text/css" href="still.css">
<script src="jquery-3.2.1.js"></script>
<script> 
$(document).ready(function() {
	
	$.get('KlikServlet', function(data) {
		console.log('prikaz odgovor');
		if (data.status == 'success') 
		{
			if (data.user == 'unauthenticated') {
				$(".channeloptions").hide();
				$("#logout12").hide();
				var newDiv = $('<div></div>');
				newDiv.addClass('PrikazVidea');
			
				var newDiv2 = $('<div></div>');
				newDiv2.addClass('OpisVidea');
			
				newDiv.append('<iframe width="700" height="450" src='+data.video.videoURL+' frameborder="0" allowfullscreen ></iframe>');
				newDiv2.append('<h1>'+data.video.opis+'</h1>'+'<h4>'+data.video.vlasnik+'</h4>'+'<h3>'+data.video.brojPregleda+' Prikaza'+'</h3>')
			
				var newDivLike = $('<div></div>');
				newDivLike.addClass('LikeDiv');
				
				var newDivDisLike = $('<div></div>');
				newDivDisLike.addClass('LikeDiv');
			
				var brojDisLike=10;
				newDivLike.append('<img id="imgDisLike" src="images/dislike.jpg" onClick="return DisLike(this)"/><p>'+data.brojDislike+'</p>');
				newDivDisLike.append('<img id="imgLike" src="images/like.jpg" onClick="return Like(this)"/><p id="pLike">'+data.brojLike+'</p>');
			
				newDiv2.append(newDivLike);
				newDiv2.append(newDivDisLike);
				$('.sadrzaj').append(newDiv);
				$('.sadrzaj').append(newDiv2);
				
				
			}
			if (data.user != 'unauthenticated') {
				$(".channeloptions h2").text(data.user.korisnickoIme);
				$(".channeloptions p").text(data.user.opis);
				$("#login12").hide();
				$("#registracija12").hide();
				var newDiv = $('<div></div>');
				newDiv.addClass('PrikazVidea');
			
				var newDiv2 = $('<div></div>');
				newDiv2.addClass('OpisVidea');
			
				newDiv.append('<iframe width="700" height="450" src='+data.video.videoURL+' frameborder="0" allowfullscreen ></iframe>');
				newDiv2.append('<h1>'+data.video.opis+'</h1>'+'<h4>'+data.video.vlasnik+'</h4>'+'<h3>'+data.video.brojPregleda+' Prikaza'+'</h3>')
			
				var newDivLike = $('<div></div>');
				newDivLike.addClass('LikeDiv');
				
				var newDivDisLike = $('<div></div>');
				newDivDisLike.addClass('LikeDiv');
			
				var brojDisLike=10;
				newDivLike.append('<img id="imgDisLike" src="images/dislike.jpg" onClick="return DisLike(this)"/><p id="pDislike">'+data.brojDislike+'</p>');
				newDivDisLike.append('<img id="imgLike" src="images/like.jpg" onClick="return Like(this)"/><p id="pLike">'+data.brojLike+'</p>');
			
				newDiv2.append(newDivLike);
				newDiv2.append(newDivDisLike);
				$('.sadrzaj').append(newDiv);
				$('.sadrzaj').append(newDiv2);
				
			}
			
		}
	});	
	
});

function DisLike(e) {
	
	if (e.getAttribute('src') == 'images/disliked.jpg') {
		e.setAttribute('src', 'images/dislike.jpg')
		
	}
	else {
		e.setAttribute('src', 'images/disliked.jpg');
		
		var upvotes = document.getElementById("imgLike");
		
		if(upvotes.getAttribute('src') == 'images/liked.jpg') {
			upvotes.setAttribute('src', 'images/like.jpg');
		}
		
	}
	
	
	return false;
}

function Like(e) {
	
	if (e.getAttribute('src') == 'images/liked.jpg') {
		e.setAttribute('src', 'images/like.jpg')
		
		
	}
	else {
		e.setAttribute('src', 'images/liked.jpg');
		
		var downvotes = document.getElementById("imgDisLike");
		
		if(downvotes.getAttribute('src') == 'images/disliked.jpg') {
			downvotes.setAttribute('src', 'images/dislike.jpg');
		}
	}
	
	
	return false;
}

</script>
</head>
<body>
	<div class="menu_bg"></div> 
    			<div id="menu">
            		<div id="menu">
            		<ul>
            			<li><div id="slika">
            				<img src="images/logo.jpg">
            			</div></li>
            			<li><div id="pretraga">
            				<input type="text" name="search_box" id="search_box" value="" />
	                		<input type="submit" name="search_button" id="search_button" value="" />
            			</div></li>
            			<li><div id="uploaddiv">
            				<input id="upload" type="image" src="images/upload.jpg">
            			</div></li>
            			<li><div id="dugmici">
            			<ul>
            				<li><a id="login12" href="Login.html">LOGIN</a></li>
            				<li><a id="logout12" href="LogoutServlet">LOGOUT</a></li>
            				<li><a id="channel12" href="Channel.html">CHANNELS</a></li>
            				<li><a id="registracija12" href="Registracija.html">SIGN UP</a></li>
           				</ul>
        			</ul>
	            </div>
	            </div>
	           </div>
	        <div class="channeloptions">
	        	<h2></h2>
	        	<center>
	        	<img src="images/channelP.jpg" height="140px" width="140px">
	        	</center><br>
	        	<p>Informacije o kanalu...</p><br><br>
	        	<center>
	        	<input id="upload" type="image" src="images/upload.jpg" height="30px" width="30px">
	        	</center>
	        	<center>
	        	Upload video
	        	</center>
	        </div>
	        <div class='sadrzaj'></div>
</body>
</html>